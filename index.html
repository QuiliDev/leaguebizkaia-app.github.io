<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.6.0.796516763466">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.6.0">

    <!-- Primary Meta Tags -->
    <title>Documentaci&#243;n Base de Datos</title>
    <meta name="title" content="Documentación Base de Datos">
    <meta name="description" content="La Federación de Voleibol organiza competiciones que se desarrollan en múltiples temporadas.">

    <!-- Canonical -->
    <link rel="canonical" href="/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="/">
    <meta property="og:title" content="Documentación Base de Datos">
    <meta property="og:description" content="La Federación de Voleibol organiza competiciones que se desarrollan en múltiples temporadas.">
    <meta property="og:image" content="/imagenes/entidadrelacionactualizado.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="/">
    <meta property="twitter:title" content="Documentación Base de Datos">
    <meta property="twitter:description" content="La Federación de Voleibol organiza competiciones que se desarrollan en múltiples temporadas.">
    <meta property="twitter:image" content="/imagenes/entidadrelacionactualizado.png">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="resources/css/retype.css?v=3.6.0.796516763466" rel="stylesheet">

    <script data-cfasync="false" src="resources/js/config.js?v=3.6.0.796516763466" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="resources/js/retype.js?v=3.6.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="resources/js/lunr.js?v=3.6.0.796516763466" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="resources/js/prism.js?v=3.6.0.796516763466" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="" class="flex items-center leading-snug text-xl">
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">LeagueBizkaiaApp Documentación</span>
                        </a><span class="hidden px-2 py-1 ml-4 text-sm font-semibold leading-none text-root-logo-label-text bg-root-logo-label-bg rounded-sm md:inline-block">Reto3</span>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://retype.com/guides/getting-started/">RetypeGuia de uso</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="docs/db/">Documentación DB</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="docs/app/">Documentación APP</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="docs/test/">Entornos de desarrollo</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://retype.com/guides/getting-started/">RetypeGuia de uso</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="docs/db/">Documentación DB</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="docs/app/">Documentación APP</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="docs/test/">Entornos de desarrollo</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="documentación-base-de-datos" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#documentación-base-de-datos">#</doc-anchor-trigger>
        <span>Documentación Base de Datos</span>
    </h1>
</doc-anchor-target>
<doc-anchor-target id="universo-del-discurso">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#universo-del-discurso">#</doc-anchor-trigger>
        <span>Universo del Discurso:</span>
    </h2>
</doc-anchor-target>
<p>La Federación de Voleibol organiza competiciones que se desarrollan en múltiples temporadas. Cada temporada involucra equipos de voleibol que se enfrentan en partidos, supervisados por árbitros. Los partidos siguen las reglas oficiales del deporte y se juegan al mejor de cinco sets. El sistema debe gestionar los detalles de los equipos, jugadores, árbitros, partidos y sets, así como mantener un registro de los resultados y las clasificaciones.</p>
<p>Cada <strong>temporada</strong> se refiere a un periodo de competición que puede tener lugar una o varias veces al año. Una temporada incluye múltiples partidos y su estructura puede variar (liguilla, eliminatorias, etc.). En esta parte del reto solo habrá una temporada, por lo que no hace falta reflejar en la base de datos.
De cada temporada se desea almacenar la siguiente información Nombre, Cantidad Equipos, Cantidad Jornadas, Iniciado, Finalizado.</p>
<p>Las <strong>jornadas</strong> guardarán los enfrentamientos semanales de los equipos inscritos en la Temporada de ida y vuelta y no se podrán repetir, y se crearán de manera automática y proporcional a la cantidad de equipos. De cada jornada se desea almacenar la siguiente información: Id_jornada, Jugado.</p>
<p>Cada <strong>equipo</strong> es un grupo organizado de jugadores que participan en los partidos de la competición. Los equipos pueden representar a clubes, instituciones o ciudades. De cada equipo se desea almacenar la siguiente información: número Identificativo,Id Equipo, Nombre del equipo, Entrenador, Fecha de Fundación, Partidos Ganados, Partidos Perdidos, Puntaje Total Acumulado.</p>
<p>Los <strong>jugadores</strong> son los miembros de los equipos. Cada jugador tiene una posición y un rol dentro del equipo y participa en los partidos según las reglas del voleibol. De cada jugador se desea almacenar la siguiente información: ID jugador, Nombre completo, Fecha de Nacimiento, Nro camiseta, Posición, Altura, Peso. Los jugadores pueden ser fichados y/o trasladados a un club siempre que no se haya empezado la temporada.
Un partido de voleibol enfrenta a dos equipos y se compone de varios sets. El equipo que gane más sets se proclamará vencedor del partido. De cada partido se desea almacenar la siguiente información: ID Partido, Equipo local, Equipo visitante, Resultado Final, Estado del partido, Puntaje_EquiLocal, Puntaje_EquiVisitante.</p>
<p>Cada <strong>partido</strong> contiene 5 sets. Un set se gana cuando un equipo alcanza 25 puntos con una ventaja de 2 puntos sobre el rival. Si el partido llega a un quinto set, este se juega a 15 puntos e igualmente sobre una ventaja de 2 puntos ante el rival.</p>
<p>El ganador de un partido es el primer equipo que sume 3 sets ganados. El marcador final se registra como parte de <strong>Puntos Totales</strong> de la temporada e influye en la clasificación general de los equipos cuando existen 2 equipos en empate de <strong>Partidos Ganados</strong>. De haber nuevamente un empate en relación a <strong>Puntos Totales</strong>, se decidirá el desempate por el año de fundación de cada equipo.</p>
<p>El sistema debe calcular y mantener una clasificación de los equipos basada en los resultados de los partidos de manera actualizada según avancen las Jornadas. Los equipos reciben puntos por cada partido ganado y se mantienen registros de sus estadísticas a lo largo de la temporada.</p>
<p><strong>Cambios realizados en el Universo del Discurso:</strong></p>
<doc-anchor-target id="diagrama-entidad-relacion-actualizado">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#diagrama-entidad-relacion-actualizado">#</doc-anchor-trigger>
        <span>Diagrama entidad relacion actualizado</span>
    </h2>
</doc-anchor-target>
<p><figure class="content-center">
    <img src="imagenes/entidadrelacionactualizado.png" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="gestion-de-usuarios">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#gestion-de-usuarios">#</doc-anchor-trigger>
        <span>Gestion de usuarios</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="creación-borrado-y-modificación-de-usuariosconcesión-y-retirada-de-privilegios-roles-perfiles-sinónimos">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creación-borrado-y-modificación-de-usuariosconcesión-y-retirada-de-privilegios-roles-perfiles-sinónimos">#</doc-anchor-trigger>
        <span>Creación, borrado y modificación de usuarios,concesión y retirada de privilegios, roles, perfiles, sinónimos</span>
    </h3>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">-- Crear roles
CREATE ROLE IF NOT EXISTS 'director';
CREATE ROLE IF NOT EXISTS 'gestor';
CREATE ROLE IF NOT EXISTS 'arbitro';
CREATE ROLE IF NOT EXISTS 'usuario';

-- Crear usuarios y asignar roles
CREATE USER IF NOT EXISTS 'director'@'localhost' IDENTIFIED BY '1234';
GRANT 'director' TO 'director'@'localhost';

CREATE USER IF NOT EXISTS 'gestor'@'localhost' IDENTIFIED BY '1234';
GRANT 'gestor' TO 'gestor'@'localhost';

CREATE USER IF NOT EXISTS 'arbitro'@'localhost' IDENTIFIED BY '1234';
GRANT 'arbitro' TO 'arbitro'@'localhost';

CREATE USER IF NOT EXISTS 'usuario'@'localhost' IDENTIFIED BY '1234';
GRANT 'usuario' TO 'usuario'@'localhost';

-- Asignar permisos
GRANT ALL PRIVILEGES ON reto3.* TO 'director';

GRANT SELECT, INSERT, UPDATE, DELETE ON reto3.* TO 'gestor';

GRANT SELECT ON reto3.* TO 'arbitro';
GRANT INSERT, UPDATE ON reto3.jornadas TO 'arbitro';

GRANT SELECT ON reto3.jornadas TO 'usuario';

-- Aplicar cambios
FLUSH PRIVILEGES;
</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen24.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="procedimientos">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#procedimientos">#</doc-anchor-trigger>
        <span>Procedimientos</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="procedimientos-con-estructuras-de-control-alternativa-simple-o-doble">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#procedimientos-con-estructuras-de-control-alternativa-simple-o-doble">#</doc-anchor-trigger>
        <span>Procedimientos con estructuras de control alternativa simple o doble</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="---procedimiento-1-insertar-un-nuevo-equipo-en-la-base-de-datos">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-1-insertar-un-nuevo-equipo-en-la-base-de-datos">#</doc-anchor-trigger>
        <span>-- Procedimiento 1: Insertar un nuevo equipo en la base de datos.</span>
    </h4>
</doc-anchor-target>
<p>Siempre que no exista ya un equipo con el mismo nombre.Si el equipo no existe, se insertan valores predeterminados para el número de victorias, derrotas, puntos totales y total de partidos.</p>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //

CREATE PROCEDURE InsertarEquipo(IN nombre VARCHAR(255), IN entrenador VARCHAR(255), IN fundacion DATE)
BEGIN
    DECLARE equipoExiste INT;
    
    -- Verificar si el equipo ya existe
    SELECT COUNT(*) INTO equipoExiste FROM Equipos WHERE Equ_nombre = nombre;
    
    IF equipoExiste = 0 THEN
        -- Insertar el nuevo equipo
        INSERT INTO Equipos (Equ_nombre, Equ_entrenador, Equ_fundacion, Equ_victorias, Equ_derrotas, Equ_puntos_totales, Equ_total_partidos)
        VALUES (nombre, entrenador, fundacion, 0, 0, 0, 0);
        
        SELECT 'Equipo insertado correctamente' AS Mensaje;
    ELSE
        SELECT 'El equipo ya existe' AS Mensaje;
    END IF;
END //

DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen1.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><figure class="content-center">
    <img src="imagenes/imagen2.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-2-modificar-las-victorias-de-un-equipo-si-existe">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-2-modificar-las-victorias-de-un-equipo-si-existe">#</doc-anchor-trigger>
        <span>-- Procedimiento 2: Modificar las victorias de un equipo si existe</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE ModificarVictorias(IN nombre VARCHAR(255), IN victorias INT)
BEGIN
    DECLARE equipoExiste INT;
    
    -- Verificar si el equipo existe
    SELECT COUNT(*) INTO equipoExiste FROM Equipos WHERE Equ_nombre = nombre;
    
    IF equipoExiste &gt; 0 THEN
        -- Actualizar las victorias del equipo
        UPDATE Equipos SET Equ_victorias = victorias WHERE Equ_nombre = nombre;
        
        SELECT 'Victorias actualizadas correctamente' AS Mensaje;
    ELSE
        SELECT 'El equipo no existe' AS Mensaje;
    END IF;
END //

DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen3.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><figure class="content-center">
    <img src="imagenes/imagen4.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="creación-de-procedimientos-con-la-estructura-de-control-alternativa-múltiple">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creación-de-procedimientos-con-la-estructura-de-control-alternativa-múltiple">#</doc-anchor-trigger>
        <span>Creación de procedimientos con la estructura de control alternativa múltiple</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="---procedimiento-3-actualizar-estado-de-la-temporada">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-3-actualizar-estado-de-la-temporada">#</doc-anchor-trigger>
        <span>-- Procedimiento 3: Actualizar estado de la temporada</span>
    </h4>
</doc-anchor-target>
<p>Este procedimiento actualiza el estado de una temporada según su ID.</p>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE ActualizarEstadoTemporada(IN temporadaID INT, IN nuevoEstado VARCHAR(20))
BEGIN
    DECLARE estadoActual BOOLEAN;
    
    -- Obtener el estado actual de la temporada
    SELECT Tem_iniciado INTO estadoActual FROM Temporadas WHERE Tem_id = temporadaID;
    
    CASE
        WHEN estadoActual IS NULL THEN
            SELECT 'La temporada no existe' AS Mensaje;
        WHEN nuevoEstado = 'iniciar' AND estadoActual = FALSE THEN
            UPDATE Temporadas SET Tem_iniciado = TRUE WHERE Tem_id = temporadaID;
            SELECT 'Temporada iniciada correctamente' AS Mensaje;
        WHEN nuevoEstado = 'finalizar' AND estadoActual = TRUE THEN
            UPDATE Temporadas SET Tem_finalizado = TRUE WHERE Tem_id = temporadaID;
            SELECT 'Temporada finalizada correctamente' AS Mensaje;
        ELSE
            SELECT 'No se puede realizar la acción solicitada' AS Mensaje;
    END CASE;
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen5.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><figure class="content-center">
    <img src="imagenes/imagen6.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><figure class="content-center">
    <img src="imagenes/imagen7.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="creación-de-procedimientos-con-la-estructura-de-control-case-de-comprobación">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creación-de-procedimientos-con-la-estructura-de-control-case-de-comprobación">#</doc-anchor-trigger>
        <span>Creación de procedimientos con la estructura de control CASE de comprobación</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="---procedimiento-4-cambiar-el-estado-de-un-equipo-activoinactivo">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-4-cambiar-el-estado-de-un-equipo-activoinactivo">#</doc-anchor-trigger>
        <span>-- Procedimiento 4: Cambiar el estado de un equipo (activo/inactivo)</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE CambiarEstadoEquipo(IN nombre VARCHAR(255), IN nuevoEstado VARCHAR(10))
BEGIN
   DECLARE equipoExiste INT;
   DECLARE estadoActual VARCHAR(10);

   -- Verificar si el equipo existe
   SELECT COUNT(*), CASE WHEN Equ_victorias &gt;= 10 THEN 'activo' ELSE 'inactivo' END 
   INTO equipoExiste, estadoActual FROM Equipos WHERE Equ_nombre = nombre;

   IF equipoExiste = 0 THEN
       SELECT 'El equipo no existe' AS Mensaje;
   ELSE
       CASE 
           WHEN nuevoEstado = 'activo' AND estadoActual = 'inactivo' THEN
               UPDATE Equipos SET Equ_victorias = 10 WHERE Equ_nombre = nombre;
               SELECT 'El equipo ha sido activado' AS Mensaje;
           WHEN nuevoEstado = 'inactivo' AND estadoActual = 'activo' THEN
               UPDATE Equipos SET Equ_victorias = 0 WHERE Equ_nombre = nombre;
               SELECT 'El equipo ha sido desactivado' AS Mensaje;
           ELSE
               SELECT 'El equipo ya está en el estado solicitado' AS Mensaje;
       END CASE;
   END IF;
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen8.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><figure class="content-center">
    <img src="imagenes/imagen9.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-5-eliminar-un-jugador-según-su-edad">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-5-eliminar-un-jugador-según-su-edad">#</doc-anchor-trigger>
        <span>-- Procedimiento 5: Eliminar un jugador según su edad</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE EliminarJugadorPorEdad(IN jugadorID INT)
BEGIN
    DECLARE edadJugador INT;

    -- Obtener la edad del jugador
    SELECT TIMESTAMPDIFF(YEAR, Jug_nacimiento, CURDATE()) INTO edadJugador FROM Jugadores WHERE Jug_id = jugadorID;

    CASE 
        WHEN edadJugador IS NULL THEN
            SELECT 'El jugador no existe' AS Mensaje;
        WHEN edadJugador &lt; 18 THEN
            SELECT 'No se puede eliminar, el jugador es menor de edad' AS Mensaje;
        ELSE
            DELETE FROM Jugadores WHERE Jug_id = jugadorID;
            SELECT 'Jugador eliminado correctamente' AS Mensaje;
    END CASE;
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><figure class="content-center">
    <img src="imagenes/imagen11.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="procedimientos--con-manejo-de-excepciones">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#procedimientos--con-manejo-de-excepciones">#</doc-anchor-trigger>
        <span>Procedimientos  con manejo de excepciones</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="---procedimiento-6-inserción-de-un-nuevo-jugador">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-6-inserción-de-un-nuevo-jugador">#</doc-anchor-trigger>
        <span>-- Procedimiento 6: Inserción de un nuevo jugador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE insertar_jugador(
    IN p_Jug_id INT,
    IN p_Jug_nombre_completo VARCHAR(255),
    IN p_Jug_fecha_nacimiento DATE,
    IN p_Jug_nacionalidad VARCHAR(255),
    IN p_Jug_dorsal SMALLINT UNSIGNED,
    IN p_Jug_posicion VARCHAR(255),
    IN p_Jug_IDEquipo INT
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al insertar el jugador';
    END;
    START TRANSACTION;
    INSERT INTO Jugadores (Jug_id, Jug_nombre_completo, Jug_fecha_nacimiento, Jug_nacionalidad, Jug_dorsal, Jug_posicion, Jug_IDEquipo)
    VALUES (p_Jug_id, p_Jug_nombre_completo, p_Jug_fecha_nacimiento, p_Jug_nacionalidad, p_Jug_dorsal, p_Jug_posicion, p_Jug_IDEquipo);
    COMMIT;
    SELECT 'Jugador insertado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-7-borrado-de-un-jugador">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-7-borrado-de-un-jugador">#</doc-anchor-trigger>
        <span>-- Procedimiento 7: Borrado de un jugador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE borrar_jugador(IN p_Jug_id INT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al borrar el jugador';
    END;
    START TRANSACTION;
    DELETE FROM Jugadores WHERE Jug_id = p_Jug_id;
    COMMIT;
    SELECT 'Jugador borrado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-8-modificación-del-nombre-de-un-equipo">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-8-modificación-del-nombre-de-un-equipo">#</doc-anchor-trigger>
        <span>-- Procedimiento 8: Modificación del nombre de un equipo</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE modificar_nombre_equipo(
    IN p_Equ_id INT,
    IN p_NuevoNombre VARCHAR(255)
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al modificar el nombre del equipo';
    END;
    START TRANSACTION;
    UPDATE Equipos SET Equ_nombre = p_NuevoNombre WHERE Equ_id = p_Equ_id;
    COMMIT;
    SELECT 'Nombre del equipo modificado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-9-inserción-de-un-nuevo-partido">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-9-inserción-de-un-nuevo-partido">#</doc-anchor-trigger>
        <span>-- Procedimiento 9: Inserción de un nuevo partido</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE insertar_partido(
    IN p_Par_id INT,
    IN p_Par_goles_loc SMALLINT UNSIGNED,
    IN p_Par_puntos_loc SMALLINT UNSIGNED,
    IN p_Par_goles_vis SMALLINT UNSIGNED,
    IN p_Par_puntos_vis SMALLINT UNSIGNED,
    IN p_Par_equipo_loc INT,
    IN p_Par_equipo_vis INT,
    IN p_Par_Arbitro_1 VARCHAR(10),
    IN p_Par_Arbitro_2 VARCHAR(10),
    IN p_Par_id_jornada INT
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al insertar el partido';
    END;
    DECLARE EXIT HANDLER FOR SQLWARNING
    BEGIN
        ROLLBACK;
        SELECT 'Advertencia al insertar el partido';
    END;
    START TRANSACTION;
    INSERT INTO Partidos (Par_id, Par_goles_loc, Par_puntos_loc, Par_goles_vis, Par_puntos_vis, Par_equipo_loc, Par_equipo_vis, Par_Arbitro_1, Par_Arbitro_2, Par_id_jornada)
    VALUES (p_Par_id, p_Par_goles_loc, p_Par_puntos_loc, p_Par_goles_vis, p_Par_puntos_vis, p_Par_equipo_loc, p_Par_equipo_vis, p_Par_Arbitro_1, p_Par_Arbitro_2, p_Par_id_jornada);
    COMMIT;
    SELECT 'Partido insertado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-10-borrado-de-un-equipo">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-10-borrado-de-un-equipo">#</doc-anchor-trigger>
        <span>-- Procedimiento 10: Borrado de un equipo</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE borrar_equipo(IN p_Equ_id INT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al borrar el equipo';
    END;
    DECLARE EXIT HANDLER FOR SQLWARNING
    BEGIN
        ROLLBACK;
        SELECT 'Advertencia al borrar el equipo';
    END;
    START TRANSACTION;
    DELETE FROM Equipos WHERE Equ_id = p_Equ_id;
    COMMIT;
    SELECT 'Equipo borrado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-11-modificación-del-dni-de-un-entrenador">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-11-modificación-del-dni-de-un-entrenador">#</doc-anchor-trigger>
        <span>-- Procedimiento 11: Modificación del DNI de un entrenador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE modificar_dni_entrenador(
    IN p_Entrenador_id INT,
    IN p_NuevoDNI VARCHAR(10)
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al modificar el DNI del entrenador';
    END;
    START TRANSACTION;
    UPDATE Entrenadores SET DNI = p_NuevoDNI WHERE Entrenador_id = p_Entrenador_id;
    COMMIT;
    SELECT 'DNI del entrenador modificado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-12-inserción-de-un-nuevo-árbitro">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-12-inserción-de-un-nuevo-árbitro">#</doc-anchor-trigger>
        <span>-- Procedimiento 12: Inserción de un nuevo árbitro</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE insertar_arbitro(
    IN p_Arb_id INT,
    IN p_Arb_nombre_completo VARCHAR(255),
    IN p_Arb_Nficha VARCHAR(10),
    IN p_Arb_fecha_nacimiento DATE,
    IN p_Arb_id_partido INT
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al insertar el árbitro';
    END;
    START TRANSACTION;
    INSERT INTO Arbitros (Arb_id, Arb_nombre_completo, Arb_Nficha, Arb_fecha_nacimiento, Arb_id_partido)
    VALUES (p_Arb_id, p_Arb_nombre_completo, p_Arb_Nficha, p_Arb_fecha_nacimiento, p_Arb_id_partido);
    COMMIT;
    SELECT 'Árbitro insertado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-13-borrado-de-un-árbitro">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-13-borrado-de-un-árbitro">#</doc-anchor-trigger>
        <span>-- Procedimiento 13: Borrado de un árbitro</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE borrar_arbitro(IN p_Arb_id INT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al borrar el árbitro';
    END;
    START TRANSACTION;
    DELETE FROM Arbitros WHERE Arb_id = p_Arb_id;
    COMMIT;
    SELECT 'Árbitro borrado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-14-modificación-de-la-fecha-de-nacimiento-de-un-jugador">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-14-modificación-de-la-fecha-de-nacimiento-de-un-jugador">#</doc-anchor-trigger>
        <span>-- Procedimiento 14: Modificación de la fecha de nacimiento de un jugador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE modificar_fecha_nacimiento_jugador(
    IN p_Jug_id INT,
    IN p_NuevaFechaNacimiento DATE
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al modificar la fecha de nacimiento del jugador';
    END;
    START TRANSACTION;
    UPDATE Jugadores SET Jug_fecha_nacimiento = p_NuevaFechaNacimiento WHERE Jug_id = p_Jug_id;
    COMMIT;
    SELECT 'Fecha de nacimiento del jugador modificada correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-15-insercion-de-un-nuevo-entrenador">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-15-insercion-de-un-nuevo-entrenador">#</doc-anchor-trigger>
        <span>-- Procedimiento 15: Insercion de un nuevo entrenador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE insertar_entrenador(
    IN p_Entrenador_id INT,
    IN p_Nombre VARCHAR(255),
    IN p_DNI VARCHAR(10),
    IN p_FechaNacimiento DATE,
    IN p_ID_Equipo INT
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al insertar el entrenador';
    END;
    START TRANSACTION;
    INSERT INTO Entrenadores (Entrenador_id, Nombre, DNI, FechaNacimiento, ID_Equipo)
    VALUES (p_Entrenador_id, p_Nombre, p_DNI, p_FechaNacimiento, p_ID_Equipo);
    COMMIT;
    SELECT 'Entrenador insertado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-16-borrado-de-un-entrenador">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-16-borrado-de-un-entrenador">#</doc-anchor-trigger>
        <span>-- Procedimiento 16: Borrado de un entrenador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE borrar_entrenador(IN p_Entrenador_id INT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al borrar el entrenador';
    END;
    START TRANSACTION;
    DELETE FROM Entrenadores WHERE Entrenador_id = p_Entrenador_id;
    COMMIT;
    SELECT 'Entrenador borrado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-17-modificación-del-resultado-de-un-partido">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-17-modificación-del-resultado-de-un-partido">#</doc-anchor-trigger>
        <span>-- Procedimiento 17: Modificación del resultado de un partido</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE modificar_resultado_partido(
    IN p_Par_id INT,
    IN p_Par_goles_loc SMALLINT UNSIGNED,
    IN p_Par_puntos_loc SMALLINT UNSIGNED,
    IN p_Par_goles_vis SMALLINT UNSIGNED,
    IN p_Par_puntos_vis SMALLINT UNSIGNED
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al modificar el resultado del partido';
    END;
    START TRANSACTION;
    UPDATE Partidos 
    SET Par_goles_loc = p_Par_goles_loc, 
        Par_puntos_loc = p_Par_puntos_loc, 
        Par_goles_vis = p_Par_goles_vis, 
        Par_puntos_vis = p_Par_puntos_vis 
    WHERE Par_id = p_Par_id;
    COMMIT;
    SELECT 'Resultado del partido modificado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen10.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="creación-de-procedimientos-con-cursores">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creación-de-procedimientos-con-cursores">#</doc-anchor-trigger>
        <span>Creación de procedimientos con cursores</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="---procedimiento-15-inserccion-de-un-nuevo-entrenador">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-15-inserccion-de-un-nuevo-entrenador">#</doc-anchor-trigger>
        <span>-- Procedimiento 15: Inserccion de un nuevo entrenador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE insertar_entrenador(
    IN p_Entrenador_id INT,
    IN p_Nombre VARCHAR(255),
    IN p_DNI VARCHAR(10),
    IN p_FechaNacimiento DATE,
    IN p_ID_Equipo INT
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al insertar el entrenador';
    END;
    START TRANSACTION;
    INSERT INTO Entrenadores (Entrenador_id, Nombre, DNI, FechaNacimiento, ID_Equipo)
    VALUES (p_Entrenador_id, p_Nombre, p_DNI, p_FechaNacimiento, p_ID_Equipo);
    COMMIT;
    SELECT 'Entrenador insertado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen12.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-16-borrado-de-un-entrenador-1">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-16-borrado-de-un-entrenador-1">#</doc-anchor-trigger>
        <span>-- Procedimiento 16: Borrado de un entrenador</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE borrar_entrenador(IN p_Entrenador_id INT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al borrar el entrenador';
    END;
    START TRANSACTION;
    DELETE FROM Entrenadores WHERE Entrenador_id = p_Entrenador_id;
    COMMIT;
    SELECT 'Entrenador borrado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen13.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---procedimiento-17-modificacion-del-resultado-de-un-partido">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---procedimiento-17-modificacion-del-resultado-de-un-partido">#</doc-anchor-trigger>
        <span>-- Procedimiento 17: Modificacion del resultado de un partido</span>
    </h4>
</doc-anchor-target>
<p>-- Código del Procedimiento:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE PROCEDURE modificar_resultado_partido(
    IN p_Par_id INT,
    IN p_Par_goles_loc SMALLINT UNSIGNED,
    IN p_Par_puntos_loc SMALLINT UNSIGNED,
    IN p_Par_goles_vis SMALLINT UNSIGNED,
    IN p_Par_puntos_vis SMALLINT UNSIGNED
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SELECT 'Error al modificar el resultado del partido';
    END;
    START TRANSACTION;
    UPDATE Partidos 
    SET Par_goles_loc = p_Par_goles_loc, 
        Par_puntos_loc = p_Par_puntos_loc, 
        Par_goles_vis = p_Par_goles_vis, 
        Par_puntos_vis = p_Par_puntos_vis 
    WHERE Par_id = p_Par_id;
    COMMIT;
    SELECT 'Resultado del partido modificado correctamente';
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen14.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="creación-de-funciones-con-diferentes-estructuras-de-control-cursores-y-excepciones">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creación-de-funciones-con-diferentes-estructuras-de-control-cursores-y-excepciones">#</doc-anchor-trigger>
        <span>Creación de funciones con diferentes estructuras de control, cursores y excepciones</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="---funcion-1-calcula-el-promedio-de-puntos-por-partido-de-un-equipo-específico">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---funcion-1-calcula-el-promedio-de-puntos-por-partido-de-un-equipo-específico">#</doc-anchor-trigger>
        <span>-- Funcion 1: calcula el promedio de puntos por partido de un equipo específico.</span>
    </h4>
</doc-anchor-target>
<p>-- Código de la Funcion:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE FUNCTION PromedioPuntosPorPartido(equipo_id INT) 
RETURNS DECIMAL(10,2)
DETERMINISTIC
BEGIN
    DECLARE puntos_total SMALLINT UNSIGNED;
    DECLARE partidos_total SMALLINT UNSIGNED;
    DECLARE promedio DECIMAL(10,2) DEFAULT 0.00;
    
    -- Manejo de excepciones
    DECLARE CONTINUE HANDLER FOR NOT FOUND RETURN 0.00;
    DECLARE CONTINUE HANDLER FOR 1365 RETURN 0.00; 
    
    SELECT Equ_puntos_totales, Equ_total_partidos 
    INTO puntos_total, partidos_total
    FROM Equipos 
    WHERE Equ_id = equipo_id;
    
    IF partidos_total &gt; 0 THEN
        SET promedio = puntos_total / partidos_total;
    END IF;
    
    RETURN promedio;
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen16.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---funcion-2-cuenta-cuántos-jugadores-de-un-equipo-ocupan-una-determinada-posición">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---funcion-2-cuenta-cuántos-jugadores-de-un-equipo-ocupan-una-determinada-posición">#</doc-anchor-trigger>
        <span>-- Funcion 2: cuenta cuántos jugadores de un equipo ocupan una determinada posición.</span>
    </h4>
</doc-anchor-target>
<p>-- Código de la Funcion:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE FUNCTION ContarJugadoresPorPosicion(equipo_id INT, posicion VARCHAR(255)) 
RETURNS INT
DETERMINISTIC
BEGIN
    DECLARE contador INT DEFAULT 0;
    DECLARE done INT DEFAULT FALSE;
    DECLARE jugador_posicion VARCHAR(255);
    
    DECLARE cur CURSOR FOR 
        SELECT Jug_posicion 
        FROM Jugadores 
        WHERE Jug_id_equipo = equipo_id;
    
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    
    OPEN cur;
    
    bucle: LOOP
        FETCH cur INTO jugador_posicion;
        IF done THEN
            LEAVE bucle;
        END IF;
        
        IF jugador_posicion = posicion THEN
            SET contador = contador + 1;
        END IF;
    END LOOP;
    
    CLOSE cur;
    
    RETURN contador;
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen17.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="---funcion-3-calcula-la-diferencia-total-de-sets-ganados-y-perdidos-por-un-equipo-en-todos-los-partidos-en-los-que-ha-participado">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#---funcion-3-calcula-la-diferencia-total-de-sets-ganados-y-perdidos-por-un-equipo-en-todos-los-partidos-en-los-que-ha-participado">#</doc-anchor-trigger>
        <span>-- Funcion 3: calcula la diferencia total de sets ganados y perdidos por un equipo en todos los partidos en los que ha participado.</span>
    </h4>
</doc-anchor-target>
<p>-- Código de la Funcion:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-sql"><code v-pre class="language-sql">DELIMITER //
CREATE FUNCTION DiferenciaSets(equipo_id INT) 
RETURNS INT
DETERMINISTIC
BEGIN
    DECLARE diferencia INT DEFAULT 0;
    DECLARE sets_loc SMALLINT;
    DECLARE sets_vis SMALLINT;
    DECLARE done INT DEFAULT FALSE;
    DECLARE equipo_es_local BOOLEAN;
    
    DECLARE cur CURSOR FOR 
        SELECT Par_sets_loc, Par_sets_vis, Par_equipo_loc = equipo_id
        FROM Partidos 
        WHERE Par_equipo_loc = equipo_id OR Par_equipo_vis = equipo_id;
    
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    
    OPEN cur;
    
    bucle: LOOP
        FETCH cur INTO sets_loc, sets_vis, equipo_es_local;
        IF done THEN
            LEAVE bucle;
        END IF;
        
        IF equipo_es_local THEN
            SET diferencia = diferencia + (sets_loc - sets_vis);
        ELSE
            SET diferencia = diferencia + (sets_vis - sets_loc);
        END IF;
    END LOOP;
    
    CLOSE cur;
    
    RETURN diferencia;
END //
DELIMITER ;</code></pre>
</doc-codeblock></div>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen18.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="creacion-de-vistas">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creacion-de-vistas">#</doc-anchor-trigger>
        <span>Creacion de vistas</span>
    </h2>
</doc-anchor-target>
<p><strong>Vista para obtener un resumen de todas las temporadas</strong>
CREATE VIEW Vista_Temporadas AS
SELECT Tem_id, Tem_nombre, Tem_cantidad_jornadas, Tem_cantidad_equipos,
CASE
WHEN Tem_finalizado = TRUE THEN &#x27;Finalizada&#x27;
WHEN Tem_iniciado = TRUE THEN &#x27;En Curso&#x27;
ELSE &#x27;Pendiente&#x27;
END AS Estado
FROM Temporadas;</p>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen21.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><strong>Vista para obtener las jornadas con el estado y su temporada asociada</strong>
CREATE VIEW Vista_Jornadas AS
SELECT J.Jor_id, J.Jor_jugado, T.Tem_nombre AS Temporada
FROM Jornadas J
JOIN Temporadas T ON J.Jor_id_temporada = T.Tem_id;</p>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen22.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><strong>Vista para obtener los registros de cambios</strong>
CREATE VIEW Vista_Logs AS
SELECT Log_id, Log_fecha, Log_accion, Log_detalle
FROM Logs
ORDER BY Log_fecha DESC;</p>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen23.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<doc-anchor-target id="creacion-de-triggers">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creacion-de-triggers">#</doc-anchor-trigger>
        <span>Creacion de Triggers</span>
    </h2>
</doc-anchor-target>
<p><strong>Crear tabla de logs para registrar cambios</strong>
CREATE TABLE Logs (
Log_id INT PRIMARY KEY AUTO_INCREMENT,
Log_fecha TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
Log_accion VARCHAR(50),
Log_detalle TEXT
);</p>
<p><strong>Trigger para registrar la creación de una temporada</strong>
CREATE TRIGGER after_insert_temporada
AFTER INSERT ON Temporadas
FOR EACH ROW
INSERT INTO Logs (Log_accion, Log_detalle)
VALUES (&#x27;Creación de Temporada&#x27;, CONCAT(&#x27;Se creó la temporada &#x27;, NEW.Tem_nombre, &#x27; con ID &#x27;, NEW.Tem_id));</p>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen19.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><strong>Trigger para registrar cambios en una temporada</strong>
CREATE TRIGGER after_update_temporada
AFTER UPDATE ON Temporadas
FOR EACH ROW
INSERT INTO Logs (Log_accion, Log_detalle)
VALUES (&#x27;Modificación de Temporada&#x27;, CONCAT(&#x27;Se modificó la temporada &#x27;, OLD.Tem_nombre, &#x27; con ID &#x27;, OLD.Tem_id));</p>
<p><strong>Trigger para registrar eliminación de una temporada</strong>
CREATE TRIGGER after_delete_temporada
AFTER DELETE ON Temporadas
FOR EACH ROW
INSERT INTO Logs (Log_accion, Log_detalle)
VALUES (&#x27;Eliminación de Temporada&#x27;, CONCAT(&#x27;Se eliminó la temporada &#x27;, OLD.Tem_nombre, &#x27; con ID &#x27;, OLD.Tem_id));</p>
<p><strong>Trigger para registrar la creación de una jornada</strong>
CREATE TRIGGER after_insert_jornada
AFTER INSERT ON Jornadas
FOR EACH ROW
INSERT INTO Logs (Log_accion, Log_detalle)
VALUES (&#x27;Creación de Jornada&#x27;, CONCAT(&#x27;Se creó la jornada con ID &#x27;, NEW.Jor_id, &#x27; en la temporada &#x27;, NEW.Jor_id_temporada));</p>
<p><strong>-- Llamadas para probar los procedimientos</strong>
<figure class="content-center">
    <img src="imagenes/imagen20.jpg" alt="Texto alternativo">
    <figcaption class="caption">Texto alternativo</figcaption>
</figure>
</p>
<p><strong>Trigger para registrar cambios en una jornada</strong>
CREATE TRIGGER after_update_jornada
AFTER UPDATE ON Jornadas
FOR EACH ROW
INSERT INTO Logs (Log_accion, Log_detalle)
VALUES (&#x27;Modificación de Jornada&#x27;, CONCAT(&#x27;Se modificó la jornada con ID &#x27;, OLD.Jor_id, &#x27; en la temporada &#x27;, OLD.Jor_id_temporada));</p>
<p><strong>Trigger para registrar eliminación de una jornada</strong>
CREATE TRIGGER after_delete_jornada
AFTER DELETE ON Jornadas
FOR EACH ROW
INSERT INTO Logs (Log_accion, Log_detalle)
VALUES (&#x27;Eliminación de Jornada&#x27;, CONCAT(&#x27;Se eliminó la jornada con ID &#x27;, OLD.Jor_id, &#x27; en la temporada &#x27;, OLD.Jor_id_temporada));</p>
<doc-anchor-target id="conclusión-y-dificultades">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#conclusión-y-dificultades">#</doc-anchor-trigger>
        <span>CONCLUSIÓN Y DIFICULTADES:</span>
    </h2>
</doc-anchor-target>
<p>Alo largo del proceso nos hemos encontrado con dudas acerca de algunas procedures y funciones pero entre equipo y alguna ayuda externa las hemos solucionado y comprendido asi logrado cumplir satisfactoriamente todo lo solicitado.</p>
<p>d</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l rounded-r-lg transition-colors duration-150 relative hover:z-5" href="base-de-datos/guia/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">Guia</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2025. All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Documentación Base de Datos", isRoot: true, level: 0, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
